# ✈️ Back-end API 명세 (Update)

## 📌 주요 변경 사항 (필독)
1. **회원가입 (`POST /api/user/signup`)**
   - 이제 회원가입 시 `username`(아이디)과 `password`만 보내면, **초기 닉네임은 아이디와 동일하게 자동 설정**됩니다.
   - 닉네임이 `null`이라서 발생하는 문제를 해결했습니다.

2. **프로필 수정 (`PUT /api/user/profile`) - 부분 수정 지원**
   - 모든 필드를 다 보낼 필요가 없습니다. **변경하고 싶은 필드만** 보내세요.
   - 보내지 않은 필드(Key가 없거나 Value가 `null`)는 기존 값이 유지됩니다.
   - 물론, 기존처럼 모든 데이터를 JSON에 담아 보내도 정상 작동합니다 (덮어쓰기).

3. **내 채팅방 조회 (`GET /api/chats/rooms`)**
   - 이제 모든 방을 불러오지 않고, **로그인한 유저가 참여 중인 채팅방만** 반환합니다.

---

## 📚 1. 사용자 (User)
**Base URL**: `/api/user`

| Method | Endpoint | 설명 | 인증 |
| :--- | :--- | :--- | :--- |
| `POST` | `/signup` | 회원가입 (닉네임 자동 설정됨) | X |
| `POST` | `/login` | 로그인 (JWT 토큰 발급) | X |
| `GET` | `/profile` | 내 프로필 조회 | O |
| `PUT` | `/profile` | 내 프로필 수정 (**부분 수정 가능**) | O |

### ✏️ 프로필 수정 예시 Payload
```json
{
  "nickname": "멋쟁이",
  "travelPace": "느림" 
  // 다른 필드를 안 보내면 기존 값 유지됨
}
```

---

## 💬 2. 채팅 (Chat)
**Base URL**: `/api/chats`

| Method | Endpoint | 설명 | 인증 |
| :--- | :--- | :--- | :--- |
| `POST` | `/rooms` | 채팅방 생성 (생성자 자동 참여) | O |
| `GET` | `/rooms` | **내 채팅방 목록 조회** (내가 멤버인 방만) | O |
| `GET` | `/{chatRoomId}` | 특정 방의 과거 대화 내역 조회 | O |

### 💡 참고 사항
- 채팅방 생성 시 `?name=방이름` 쿼리 파라미터 필수.
- 이제 방을 만들면 본인이 자동으로 `memberIds`에 추가됩니다.

---

## 🤖 3. AI & 4. 가게 정보 (기존 동일)
- `/api/ai/**`
- `/api/stores/**`

---

## ✅ 연결 테스트 체크리스트 (프론트)
1. **회원가입**: 가입 후 바로 `/api/user/profile` 조회했을 때 `nickname`이 아이디와 같은지 확인.
2. **프로필 수정**: 닉네임만 바꿔보고, 다른 정보(생일 등)가 날라가지 않고 유지되는지 확인.
3. **채팅방**: 방을 하나 만들고 목록 조회(`GET /rooms`) 시 그 방이 나오는지 확인.
